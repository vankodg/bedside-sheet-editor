(this["webpackJsonpbedside-sheet-editor"]=this["webpackJsonpbedside-sheet-editor"]||[]).push([[0],{36:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(12),r=s.n(i),l=s(6),a=s(3),o=s(55),c=s(50),b=s(51),d=s(52),u=s(48),j=s(49),h=s(47),f=s(54),O=s(22),x=s(26),w=s(53),m=s(21),g=s(2);function L(e){var t=e.isActive,s=e.groupLabelList,n=e.setGroupLabelList;return Object(g.jsxs)(c.a,{direction:"column",style:{alignItems:"normal"},children:[Object(g.jsx)(O.a,{children:"Group labels of the first column"}),Object(l.a)(Array(s.length)).map((function(e,i){return Object(g.jsxs)(b.a,{grow:!0,children:[Object(g.jsx)(d.a,{span:6,children:Object(g.jsx)(x.a,{placeholder:"Label of group "+(i+1),value:s[i].label||"",onChange:function(e){var t=Object(l.a)(s);t[i].label=e.currentTarget.value,n(t)},disabled:!t})}),Object(g.jsx)(d.a,{span:2,children:Object(g.jsx)(u.a,{value:s[i].startRow,onChange:function(e){var t=Object(l.a)(s);t[i].startRow=e,n(t)},hideControls:!0,disabled:!t})}),Object(g.jsx)(d.a,{span:2,children:Object(g.jsx)(u.a,{value:s[i].endRow,onChange:function(e){var t=Object(l.a)(s);t[i].endRow=e,n(t)},hideControls:!0,disabled:!t})}),Object(g.jsx)(d.a,{span:1,children:Object(g.jsx)(w.a,{onClick:function(){var e=Object(l.a)(s);e.splice(i,1),n(e)},disabled:!t,children:Object(g.jsx)(m.b,{})})})]},i)})),Object(g.jsx)(f.a,{leftIcon:Object(g.jsx)(m.a,{size:26}),onClick:function(){var e=[].concat(Object(l.a)(s),[{label:"",startRow:0,endRow:0}]);n(e)},disabled:!t,children:"Add new group label"})]})}function C(e){return Object(g.jsxs)(c.a,{direction:"column",style:{alignItems:"normal"},children:[Object(g.jsx)(O.a,{children:"Labels in the first column"}),Object(l.a)(Array(e.numOfRows)).map((function(t,s){return Object(g.jsx)(x.a,{placeholder:"Label of row "+(s+1),value:e.firstColLabelList[s]||"",onChange:function(t){var n=Object(l.a)(e.firstColLabelList);n[s]=t.currentTarget.value,e.setFirstColLabelList(n)},disabled:!e.isActive},s)}))]})}function p(e){return Object(g.jsxs)(c.a,{children:[Object(g.jsxs)(b.a,{justify:"space-between",align:"flex-start",grow:!0,style:{height:"67vh",width:"calc(100% - 180px)",overflowY:"scroll",margin:0,marginBottom:16},children:[Object(g.jsxs)(d.a,{span:3,children:[Object(g.jsx)(u.a,{label:"Number of rows",id:"numOfRows",min:1,max:100,type:"number",value:e.numOfRows,onChange:function(t){Number.isInteger(t)&&0<=t&&t<=100&&e.setNumOfRows(t)}}),Object(g.jsx)(j.a,{mt:"xs",mb:"md",checked:e.isFirstRow,onChange:function(t){return e.setIsFirstRow(t.currentTarget.checked)},label:"First row with hours"})]}),Object(g.jsxs)(d.a,{span:3,children:[Object(g.jsx)(j.a,{mb:"xs",checked:e.isFirstCol,onChange:function(t){return e.setIsFirstCol(t.currentTarget.checked)},label:"First column"}),Object(g.jsx)(h.a,{label:"Shows the first 5 characters of the column label in the middle column",color:"primary",position:"right",withArrow:!0,style:{display:"flex"},children:Object(g.jsx)(j.a,{mb:"xs",checked:e.isMidIndex,onChange:function(t){return e.setIsMidIndex(t.currentTarget.checked)},label:"Mid-row indexes"})}),Object(g.jsx)(h.a,{label:"Shows the first 5 characters of the column label in the last column",color:"primary",position:"right",withArrow:!0,style:{display:"flex"},children:Object(g.jsx)(j.a,{mb:"xs",checked:e.isEndIndex,onChange:function(t){return e.setIsEndIndex(t.currentTarget.checked)},label:"Row-end indexes"})}),Object(g.jsx)(C,{isActive:e.isFirstCol,numOfRows:e.numOfRows,firstColLabelList:e.firstColLabelList,setFirstColLabelList:e.setFirstColLabelList})]}),Object(g.jsx)(d.a,{span:5,children:Object(g.jsx)(L,{isActive:e.isFirstCol,groupLabelList:e.groupLabelList,setGroupLabelList:e.setGroupLabelList})})]}),Object(g.jsxs)(c.a,{direction:"column",position:"center",children:[Object(g.jsx)(f.a,{onClick:function(){return e.downloadPng()},children:"Download PNG"}),Object(g.jsx)(f.a,{onClick:function(t){t.preventDefault(),e.downloadConfig()},children:"Download config"})]})]})}var R=32,y=1800,v=200,I=s(25),F=s(27),A=["label","isLabelCentered","transform"];function N(e){e.label,e.isLabelCentered;var t=e.transform,s=Object(F.a)(e,A);return Object(g.jsxs)("g",{transform:t||"",children:[Object(g.jsx)("rect",Object(I.a)({style:{fill:"white",stroke:"black"}},s)),e.label&&!e.isLabelCentered&&Object(g.jsx)("text",{x:e.x,y:e.y,dx:.05*Number(e.width),dy:.85*Number(e.height),style:{font:"normal "+.8*Number(e.height)+"px sans-serif"},children:e.label}),e.label&&e.isLabelCentered&&Object(g.jsx)("text",{x:Number(e.x)+(e.width?Number(e.width)/2:15),y:Number(e.y)+(e.height?Number(e.height)/2:8),dominantBaseline:"central",textAnchor:"middle",style:{font:"normal "+.8*Number(e.height)+"px sans-serif"},children:e.label})]})}function E(e){var t=e.height/e.numOfCells;return Object(g.jsx)("g",{transform:"translate("+e.x+" "+e.y+")",children:Object(l.a)(Array(e.numOfCells)).map((function(s,n){return Object(g.jsx)(N,{x:0,y:n*t,width:e.width,height:t,label:e.labelList?e.labelList[n]:void 0},n)}))})}function T(e){var t=e.width/e.numOfCells;return Object(g.jsx)("g",{transform:"translate("+e.x+" "+e.y+")",children:Object(l.a)(Array(e.numOfCells)).map((function(s,n){return Object(g.jsx)(N,{x:n*t,y:0,width:t,height:e.height,label:e.labelList?e.labelList[n]:void 0,isLabelCentered:e.isLabelsCentered},n)}))})}function k(e){var t=y+(e.isFirstCol?232:0)+1,s=((e.isFirstRow?1:0)+e.numOfRows)*R+1;return Object(g.jsxs)("svg",{id:"svg-bedsheet",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t+" "+s,children:[e.isFirstCol&&e.groupLabelList.map((function(t,s){return Object(g.jsx)(N,{label:t.label,x:-(t.endRow-t.startRow+1)*R,y:(e.isFirstRow?t.startRow:t.startRow-1)*R,transform:"rotate(-90 0 "+(e.isFirstRow?t.startRow:t.startRow-1)*R+")",height:R,width:(t.endRow-t.startRow+1)*R,isLabelCentered:!0},s)})),e.isFirstCol&&Object(g.jsx)(E,{numOfCells:e.numOfRows,x:R,y:(e.isFirstRow?1:0)*R,width:v,height:e.numOfRows*R,labelList:e.firstColLabelList},-2),e.isFirstRow&&Object(g.jsx)(T,{numOfCells:24,x:e.isFirstCol?232:0,y:0,height:R,width:y,labelList:["07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","01","02","03","04","05","06"],isLabelsCentered:!0},-1),Object(l.a)(Array(e.numOfRows)).map((function(t,s){return Object(g.jsxs)("g",{children:[Object(g.jsx)(T,{numOfCells:24,x:e.isFirstCol?232:0,y:((e.isFirstRow?1:0)+s)*R,height:R,width:y},s),e.isMidIndex&&e.firstColLabelList[s]&&Object(g.jsx)("text",{x:(e.isFirstCol?Number(232):0)+Number(900),dx:-3.75,y:((e.isFirstRow?1:0)+s)*R,dy:.32,dominantBaseline:"hanging",textAnchor:"end",style:{font:"normal 12.8px sans-serif"},children:e.firstColLabelList[s].substring(0,5)},"mid"),e.isEndIndex&&e.firstColLabelList[s]&&Object(g.jsx)("text",{x:(e.isFirstCol?Number(232):0)+Number(y),dx:-3.75,y:((e.isFirstRow?1:0)+s)*R,dy:.32,dominantBaseline:"hanging",textAnchor:"end",style:{font:"normal 12.8px sans-serif"},children:e.firstColLabelList[s].substring(0,5)},"end")]})}))]})}function S(e,t){var s=Object(n.useState)((function(){if("undefined"===typeof window)return t;try{var s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(n){return console.log(n),t}})),i=Object(a.a)(s,2),r=i[0],l=i[1];return[r,function(t){try{var s=t instanceof Function?t(r):t;l(s),"undefined"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(s))}catch(n){console.log(n)}}]}var _=s(35);function G(){var e=S("numOfRows",6),t=Object(a.a)(e,2),s=t[0],i=t[1],r=S("isFirstRow",!1),c=Object(a.a)(r,2),b=c[0],d=c[1],u=S("isFirstCol",!1),j=Object(a.a)(u,2),h=j[0],f=j[1],O=S("firstColLabelList",[]),x=Object(a.a)(O,2),w=x[0],m=x[1],L=S("isMidIndex",!1),C=Object(a.a)(L,2),v=C[0],I=C[1],F=S("isEndIndex",!1),A=Object(a.a)(F,2),N=A[0],E=A[1],T=S("groupLabelList",[{label:"",startRow:1,endRow:3},{label:"",startRow:4,endRow:6}]),G=Object(a.a)(T,2),M=G[0],B=G[1],U=Object(n.useState)(""),D=Object(a.a)(U,2),H=D[0],P=D[1],J=Object(n.useRef)(null);Object(n.useEffect)((function(){""!==H&&(J.current.click(),URL.revokeObjectURL(H),P(""))}),[H]);return Object(g.jsxs)(o.a,{size:"xl",children:[Object(g.jsx)(p,{numOfRows:s,setNumOfRows:i,isFirstRow:b,setIsFirstRow:d,isFirstCol:h,setIsFirstCol:f,firstColLabelList:w,setFirstColLabelList:m,isMidIndex:v,setIsMidIndex:I,isEndIndex:N,setIsEndIndex:E,groupLabelList:M,setGroupLabelList:B,downloadPng:function(){_.saveSvgAsPng(document.getElementById("svg-bedsheet"),"bedsheet.png")},downloadConfig:function(){var e="DATA_AREA_ROWS = "+s+"\n";e+="DATA_AREA_COLUMNS = 24\n",e+="ROW_HEIGHT = 32\n",e+="COLUMN_WIDTH = 75\n",e+="INPUT_SECTION_OFFSET_X = "+(h?232:0)+"\n",e+="INPUT_SECTION_OFFSET_Y = "+(b?R:0)+"\n",e+="ORIGINAL_WIDTH = "+(y+(h?232:0)+1)+"\n",e+="ORIGINAL_HEIGHT = "+(((b?1:0)+s)*R+1)+"\n",e+="LABEL_LIST = ["+Object(l.a)(Array(s)).map((function(e,t){return"'"+(h&&w[t]?w[t]:"")+"'"}))+"]\n";var t=new Blob([e],{type:"text/plain;charset=utf-8"}),n=URL.createObjectURL(t);P(n.toString())}}),Object(g.jsx)("a",{style:{display:"none"},download:"config.py",href:H,ref:J,children:"download it"}),Object(g.jsx)(k,{numOfRows:s,isFirstRow:b,isFirstCol:h,firstColLabelList:w,isMidIndex:v,isEndIndex:N,groupLabelList:M})]})}r.a.render(Object(g.jsx)(G,{}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.19c90c9e.chunk.js.map